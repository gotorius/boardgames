<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>オセロ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container">
        <header class="game-header">
            <a href="../index.html" class="home-link">← ホーム</a>
            <h1>⚫ オセロ</h1>
            <div class="game-controls">
                <button id="new-game-btn" class="btn btn-primary">新しいゲーム</button>
                <button id="undo-btn" class="btn btn-secondary" disabled>元に戻す</button>
                <button id="hint-btn" class="btn btn-secondary">ヒント</button>
                <button id="online-btn" class="btn btn-danger">オンライン対戦</button>
            </div>
        </header>

        <!-- ゲーム情報パネル -->
        <div class="game-info-panel">
            <div class="player-info black-player">
                <div class="player-disc black"></div>
                <div class="player-details">
                    <span class="player-name">黒（あなた）</span>
                    <span class="disc-count" id="black-count">2</span>
                </div>
                <div class="turn-indicator" id="black-turn"></div>
            </div>
            
            <div class="game-status">
                <div class="current-turn" id="current-turn">黒の番です</div>
                <div class="game-mode" id="game-mode">VS CPU（普通）</div>
            </div>
            
            <div class="player-info white-player">
                <div class="turn-indicator" id="white-turn"></div>
                <div class="player-details">
                    <span class="player-name" id="white-player-name">白（CPU）</span>
                    <span class="disc-count" id="white-count">2</span>
                </div>
                <div class="player-disc white"></div>
            </div>
        </div>

        <main class="game-board-wrapper">
            <div class="board-container">
                <div class="board" id="board">
                    <!-- 8x8のセルがJavaScriptで生成される -->
                </div>
            </div>
        </main>

        <!-- モード選択モーダル -->
        <div id="mode-modal" class="modal">
            <div class="modal-content">
                <h2>🎮 ゲームモード選択</h2>
                <div class="mode-options">
                    <div class="mode-section">
                        <h3>CPU対戦</h3>
                        <div class="difficulty-options">
                            <button class="mode-btn" data-mode="cpu" data-difficulty="easy">
                                <span class="mode-icon">🌱</span>
                                <span class="mode-name">かんたん</span>
                                <span class="mode-desc">初心者向け</span>
                            </button>
                            <button class="mode-btn" data-mode="cpu" data-difficulty="normal">
                                <span class="mode-icon">⚔️</span>
                                <span class="mode-name">ふつう</span>
                                <span class="mode-desc">バランス重視</span>
                            </button>
                            <button class="mode-btn" data-mode="cpu" data-difficulty="hard">
                                <span class="mode-icon">🔥</span>
                                <span class="mode-name">むずかしい</span>
                                <span class="mode-desc">上級者向け</span>
                            </button>
                        </div>
                    </div>
                    <div class="mode-section">
                        <h3>2人対戦</h3>
                        <button class="mode-btn wide" data-mode="pvp">
                            <span class="mode-icon">👥</span>
                            <span class="mode-name">ローカル対戦</span>
                            <span class="mode-desc">同じ端末で2人対戦</span>
                        </button>
                        <button class="mode-btn wide" data-mode="online">
                            <span class="mode-icon">🌐</span>
                            <span class="mode-name">オンライン対戦</span>
                            <span class="mode-desc">世界中のプレイヤーと対戦</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- オンライン対戦ロビーモーダル -->
        <div id="online-lobby-modal" class="modal hidden">
            <div class="modal-content online-content">
                <h2>🌐 オンライン対戦</h2>
                <div id="lobby-screen" class="online-screen">
                    <p class="online-description">
                        世界中のプレイヤーとリアルタイム対戦！<br>
                        黒と白がランダムに決まります
                    </p>
                    <div class="name-input-section">
                        <label for="online-name">プレイヤー名:</label>
                        <input type="text" id="online-name" placeholder="名前を入力" maxlength="20">
                    </div>
                    <button id="start-matching-btn" class="btn btn-danger btn-large">対戦相手を探す</button>
                </div>
                <div id="matching-screen" class="online-screen hidden">
                    <div class="matching-animation">
                        <div class="spinner"></div>
                        <p>対戦相手を探しています...</p>
                        <p id="waiting-count" class="waiting-info"></p>
                    </div>
                    <button id="cancel-matching-btn" class="btn btn-secondary">キャンセル</button>
                </div>
                <div class="modal-buttons">
                    <button id="close-lobby-btn" class="btn btn-secondary">閉じる</button>
                </div>
            </div>
        </div>

        <!-- オンライン対戦中ステータスバー -->
        <div id="online-status" class="online-status hidden">
            <div class="online-info">
                <div class="online-player me">
                    <span class="online-player-name" id="my-online-name">あなた</span>
                    <div class="online-player-disc" id="my-disc-color"></div>
                </div>
                <div class="vs-label">VS</div>
                <div class="online-player opponent">
                    <div class="online-player-disc" id="opponent-disc-color"></div>
                    <span class="online-player-name" id="opponent-online-name">相手</span>
                </div>
            </div>
            <button id="leave-online-btn" class="btn btn-secondary btn-small">退出</button>
        </div>

        <!-- オンライン対戦結果モーダル -->
        <div id="online-result-modal" class="modal hidden">
            <div class="modal-content result-content">
                <h2 id="online-result-title">🎉 勝利！</h2>
                <div class="result-score">
                    <div class="score-item">
                        <div class="score-disc black"></div>
                        <span class="score-value" id="online-result-black">0</span>
                    </div>
                    <span class="score-separator">-</span>
                    <div class="score-item">
                        <span class="score-value" id="online-result-white">0</span>
                        <div class="score-disc white"></div>
                    </div>
                </div>
                <div class="result-message" id="online-result-message"></div>
                <div class="modal-buttons">
                    <button id="online-play-again-btn" class="btn btn-primary">もう一度対戦</button>
                    <button id="online-back-btn" class="btn btn-secondary">ロビーに戻る</button>
                </div>
            </div>
        </div>

        <!-- 勝敗モーダル -->
        <div id="result-modal" class="modal hidden">
            <div class="modal-content result-content">
                <h2 id="result-title">🎉 勝利！</h2>
                <div class="result-score">
                    <div class="score-item">
                        <div class="score-disc black"></div>
                        <span class="score-value" id="result-black">0</span>
                    </div>
                    <span class="score-separator">-</span>
                    <div class="score-item">
                        <span class="score-value" id="result-white">0</span>
                        <div class="score-disc white"></div>
                    </div>
                </div>
                <div class="result-message" id="result-message"></div>
                <div class="modal-buttons">
                    <button id="play-again-btn" class="btn btn-primary">もう一度プレイ</button>
                    <button id="change-mode-btn" class="btn btn-secondary">モード変更</button>
                </div>
            </div>
        </div>

        <!-- パスモーダル -->
        <div id="pass-modal" class="modal hidden">
            <div class="modal-content pass-content">
                <h2 id="pass-title">⚠️ パス</h2>
                <p id="pass-message">置ける場所がありません</p>
                <div class="modal-buttons">
                    <button id="pass-ok-btn" class="btn btn-primary">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- Firebase 設定 -->
    <script src="firebase-config.js"></script>
    
    <script src="game.js"></script>
</body>
</html>
